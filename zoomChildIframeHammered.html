<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1">

<title>Child: Hammered Iframe</title>
<style>

html, body, div, img {
    padding: 0;
    margin: 0;
    border: 0;
}

html, body {
    background-color: pink;
    border: 0px solid red;
}

#wrapper {
    border: 0px solid green;
    /*position: relative;*/
    width: 100%;
}

#targetImg {
    width: 200%;
}
</style>
</head>

<body>


<div id='wrapper' >
    <img id='targetImg' src="./Travel_MoneyTips.png" alt="" />
    <!-- <img id='targetImg' src="http://2.bp.blogspot.com/-VQJMK8PRnI0/UjYaglEkV5I/AAAAAAAAACg/N2MkW6iorr0/s1600/30192_1600x1200-4-cute-cats.jpg" /> -->
</div>

<script src="./hammer.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>


<script type="text/javascript">


var pops = parent.document.getElementById('iframeElement');
var parentLabel = parent.document.getElementById('parentLabel');
console.log(pops);
console.log(parentLabel);

pops.onload = function () {
    // Once content is available, get body
    var iframeBody = pops.contentWindow.document.body;
    var hammertime = new Hammer(iframeBody);

    // Register gestures as normal
    hammertime.on('pan', panImage);
    hammertime.on('doubletap', panImage);
    hammertime.on('tap', panImage);

}




function panImage (e) {
    parentLabel.innerHTML = e.deltaX;
    // These variables need to be local since orientation can change.
    var imgWidth = parseInt(getComputedStyle(wrapper).width),
        imgHeight = parseInt(getComputedStyle(wrapper).height),
        // frameWidth & frameHeight: Use parent iframe's size by default.  Use viewport's size as fallback.
        frameWidth = /*window.frameElement.offsetWidth ||*/ Math.max(document.documentElement.clientWidth, window.innerWidth || 0), 
        frameHeight = /*window.frameElement.offsetHeight||*/ Math.max(document.documentElement.clientWidth, window.innerHeight || 0);


    var rate = 0.5;
    // Configure Horizontal Pan
    var minLeft = 0,
        maxLeft = frameWidth - imgWidth,
        posLeft = parseInt(getComputedStyle(targetImg).left),
        newLeft  =  posLeft + (e.deltaX * rate);

    if(imgWidth < frameWidth || newLeft > minLeft) {
        newLeft = minLeft ;
    } else if (newLeft < maxLeft) {
        newLeft = maxLeft;
    }
    targetImg.style.left = newLeft + 'px';


    // Configure Vertical Pan
    var minTop = 0,
        maxTop = frameHeight - imgHeight,
        posTop = parseInt(getComputedStyle(targetImg).top),
        newTop  =  posTop + (e.deltaY * rate);

    if(imgHeight < frameHeight || newTop > minTop) {
        newTop = minTop ;
    } else if (newTop < maxTop) {
        newTop = maxTop;
    }
    targetImg.style.top = newTop + 'px';

}

</script>




</body>

</html>